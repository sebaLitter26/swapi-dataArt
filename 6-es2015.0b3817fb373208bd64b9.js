(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{YVKM:function(t,e,a){"use strict";a.r(e),a.d(e,"CharactersModule",(function(){return P}));var c=a("ofXK"),n=a("tyNb"),i=a("sCmA"),o=a("tmTa"),r=a("R3tS"),s=a("0EUg"),l=a("cp0P"),m=a("fXoL"),p=a("yTNM"),b=a("IRfi"),u=a("A2Vd"),d=a("G/Ji"),h=a("TURh");const f=["table"];function g(t,e){1&t&&m.Ob(0,"mat-spinner")}function y(t,e){1&t&&(m.Tb(0,"th",15),m.zc(1," Name "),m.Sb())}function w(t,e){if(1&t&&(m.Tb(0,"td",16),m.zc(1),m.Sb()),2&t){const t=e.$implicit;m.Bb(1),m.Bc(" ",t.name," ")}}function S(t,e){1&t&&(m.Tb(0,"th",15),m.zc(1," Eye Color "),m.Sb())}function C(t,e){if(1&t&&(m.Tb(0,"td",16),m.zc(1),m.Sb()),2&t){const t=e.$implicit;m.xc("color",t.eye_color),m.Bb(1),m.Bc(" ",t.eye_color," ")}}function O(t,e){1&t&&(m.Tb(0,"th",15),m.zc(1," Gender "),m.Sb())}function x(t,e){if(1&t&&(m.Tb(0,"td",16),m.zc(1),m.Sb()),2&t){const t=e.$implicit;m.Bb(1),m.Bc(" ",t.gender," ")}}function R(t,e){1&t&&(m.Tb(0,"th",15),m.zc(1," Films "),m.Sb())}function v(t,e){if(1&t&&(m.Tb(0,"mat-chip"),m.zc(1),m.Sb()),2&t){const t=e.$implicit;m.Bb(1),m.Ac(t.title)}}function T(t,e){if(1&t&&(m.Tb(0,"td",16),m.Tb(1,"mat-chip-list"),m.yc(2,v,2,1,"mat-chip",17),m.Sb(),m.Sb()),2&t){const t=e.$implicit;m.Bb(2),m.kc("ngForOf",t.films)}}function D(t,e){1&t&&m.Ob(0,"tr",18)}function _(t,e){1&t&&m.Ob(0,"tr",19)}const M=[{path:"",component:(()=>{class t{constructor(t,e){this.apiService=t,this.activatedRoute=e,this.showFilms=[],this.displayedColumns=["name","eye_color","gender","films"]}ngOnInit(){this.film$=this.activatedRoute.snapshot.params;const t=this.activatedRoute.snapshot.params.characters.split(","),e=[];this.character$Subscription=this.getArrayRequest(t).subscribe(t=>{e.push(t)},t=>console.log("onError",t),()=>{this.characters=e,e.forEach((t,e)=>{this.expandFilmDetails(t,e)}),console.log(this.characters),this.dataSource=new o.k(this.characters),this.table.renderRows(),this.dataSource.paginator=this.paginator})}expandFilmDetails(t,e){const a=[];this.films$Subscription=this.getArrayRequest(t.films).subscribe(t=>{a.push(t)},t=>console.log("onError",t),()=>{this.characters[e].films=a})}getArrayRequest(t){return Object(l.a)(t.map(t=>this.apiService.sendGetRequest(t.split(this.apiService.HOST_URL)[1]))).pipe(Object(s.a)())}applyFilter(t){this.dataSource.filter=t.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}ngOnDestroy(){this.character$Subscription.unsubscribe(),this.films$Subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(m.Nb(p.a),m.Nb(n.a))},t.\u0275cmp=m.Hb({type:t,selectors:[["app-characters"]],viewQuery:function(t,e){var a;1&t&&(m.wc(i.a,!0),m.wc(r.a,!0),m.wc(f,!0)),2&t&&(m.pc(a=m.cc())&&(e.paginator=a.first),m.pc(a=m.cc())&&(e.sort=a.first),m.pc(a=m.cc())&&(e.table=a.first))},decls:23,vars:6,consts:[[4,"ngIf"],["matInput","","placeholder","Search by Name/Eye Color/Gender/Films",3,"keyup"],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["table",""],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","eye_color"],["mat-cell","",3,"color",4,"matCellDef"],["matColumnDef","gender"],["matColumnDef","films",1,"film-colum"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","example-element-row",4,"matRowDef","matRowDefColumns"],[3,"pageIndex","pageSize"],["mat-header-cell",""],["mat-cell",""],[4,"ngFor","ngForOf"],["mat-header-row",""],["mat-row","",1,"example-element-row"]],template:function(t,e){1&t&&(m.yc(0,g,1,0,"mat-spinner",0),m.Tb(1,"mat-form-field"),m.Tb(2,"mat-label"),m.zc(3,"Filter"),m.Sb(),m.Tb(4,"input",1),m.bc("keyup",(function(t){return e.applyFilter(t)})),m.Sb(),m.Sb(),m.Tb(5,"div",2),m.Tb(6,"table",3,4),m.Rb(8,5),m.yc(9,y,2,0,"th",6),m.yc(10,w,2,1,"td",7),m.Qb(),m.Rb(11,8),m.yc(12,S,2,0,"th",6),m.yc(13,C,2,3,"td",9),m.Qb(),m.Rb(14,10),m.yc(15,O,2,0,"th",6),m.yc(16,x,2,1,"td",7),m.Qb(),m.Rb(17,11),m.yc(18,R,2,0,"th",6),m.yc(19,T,3,1,"td",7),m.Qb(),m.yc(20,D,1,0,"tr",12),m.yc(21,_,1,0,"tr",13),m.Sb(),m.Ob(22,"mat-paginator",14),m.Sb()),2&t&&(m.kc("ngIf",e.characters&&0===e.characters.length),m.Bb(6),m.kc("dataSource",e.dataSource),m.Bb(14),m.kc("matHeaderRowDef",e.displayedColumns),m.Bb(1),m.kc("matRowDefColumns",e.displayedColumns),m.Bb(1),m.kc("pageIndex",0)("pageSize",10))},directives:[c.k,b.a,b.d,u.b,o.j,r.a,o.c,o.e,o.b,o.g,o.i,i.a,d.b,o.d,o.a,h.b,c.j,h.a,o.f,o.h],styles:["table[_ngcontent-%COMP%]{width:100%}.mat-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}mat-input-element[_ngcontent-%COMP%]{color:#99a21f}tr.example-detail-row[_ngcontent-%COMP%]{height:0}tr.example-element-row[_ngcontent-%COMP%]:not(.example-expanded-row):active, tr.example-element-row[_ngcontent-%COMP%]:not(.example-expanded-row):hover{background:#a8bb74}.example-element-detail[_ngcontent-%COMP%]{overflow:hidden;display:flex}.example-element-description[_ngcontent-%COMP%]{padding:16px}.example-element-description-attribution[_ngcontent-%COMP%]{opacity:.5}mat-chip-list[_ngcontent-%COMP%]{width:60%;padding:4px}.film-colum[_ngcontent-%COMP%]{width:40%}"]}),t})()}];let k=(()=>{class t{}return t.\u0275mod=m.Lb({type:t}),t.\u0275inj=m.Kb({factory:function(e){return new(e||t)},imports:[[n.c.forChild(M)],n.c]}),t})();var z=a("vvyD");let P=(()=>{class t{}return t.\u0275mod=m.Lb({type:t}),t.\u0275inj=m.Kb({factory:function(e){return new(e||t)},imports:[[c.c,k,z.a]]}),t})()}}]);